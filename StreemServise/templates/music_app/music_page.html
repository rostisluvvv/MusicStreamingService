{% extends 'base.html' %}

{% load thumbnail %}
{% load static %}

{% block content %}

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="{% static 'img/fav/fav.ico' %}" type="image ">
  <link rel="apple-touch-icon" sizes="180x180"
        href="{% static 'img/fav/apple-touch-icon.png' %}">
  <link rel="icon" type="image/png" sizes="32x32"
        href="{% static 'img/fav/favicon-32x32.png' %}">
  <link rel="icon" type="image/png" sizes="16x16"
        href="{% static 'img/fav/favicon-16x16.png' %}">
  <meta name="msapplication-TileColor" content="#000">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" href="{% static 'css/pleer_style.css' %}">
  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'
        type='text/css'>
</head>


<div class="container">
  <header>
    <div class="playlist">
      <i class="fa fa-bars"></i>
    </div>
    <div class="setting">
      <i class="fa fa-cog"></i>
    </div>
  </header>

  <main>
    <div class="album-art">
      <img src="{{ music.image.url }}"/>
    </div>

    <div class="player">
      <i class="fa fa-repeat"></i>
      <i class="fa fa-fast-backward"></i>
      <i class="fa fa-play" id="play-pause-btn"></i>
      <i class="fa fa-fast-forward"></i>
      <i class="fa fa-random"></i>
    </div>

  </main>
  <footer>
    <div class="title">{{ music.songwriter }} - {{ music.song_title }}
    </div>
    <div class="time-tracker">
      <div class="timer">
        <div class="bg">
        </div>
      </div>
      <div class="time">00:80</div>
    </div>
  </footer>
  <audio id="audio">
    <source src="{{ music.file.url }}" type="audio/mpeg">
  </audio>
</div>


<script>
  const audio = document.getElementById('audio');
  const playPauseBtn = document.getElementById('play-pause-btn');
  const progressBar = document.querySelector('.bg');
  const timeEl = document.querySelector('.time');



  playPauseBtn.addEventListener('click', () => {
    if (audio.paused) {
      audio.play();
      playPauseBtn.textContent = 'Pause';
    } else {
      audio.pause();
      playPauseBtn.textContent = 'Play';
    }
  });

  audio.addEventListener('timeupdate', () => {
    const currentTime = audio.currentTime;
    const duration = audio.duration;
    const progress = (currentTime / duration) * 100;

    progressBar.style.width = `${progress}%`;
  });

  audio.addEventListener('loadedmetadata', () => {
    const duration = audio.duration;
    const minutes = Math.floor(duration / 60);
    const seconds = Math.floor(duration % 60);
    timeEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
  });


</script>

{% endblock %}

